<?xml version="1.0"?>

<!-- Production Project -->
<!-- Takes about 2.5 minues to run on a signle gsimple file -->

<!DOCTYPE project [
<!ENTITY release "v09_32_01">
<!ENTITY releasetag "e20:prof">
<!ENTITY my_version "v1">
<!ENTITY my_run "1">
<!ENTITY flux_config "I-Z">
<!ENTITY name "mdeltutt_fluxreader">
<!ENTITY file_type "data">
<!ENTITY run_type "physics">
<!ENTITY PNFSpath "/pnfs/sbnd/resilient/users/mdeltutt/">
]>


<project name="&name;_&flux_config;">

  <!-- Group -->
  <group>sbnd</group>

  <!-- Project size -->
  <numevents>1000000000</numevents>

  <!-- Batch resources -->
  <resource>DEDICATED,OPPORTUNISTIC,OFFSITE</resource>

  <!-- Larsoft information -->
  <larsoft>
    <tag>&release;</tag>
    <qual>&releasetag;</qual>
    <local>&PNFSpath;Tarballs/sbndcode_v09_32_01_fluxreader__&my_version;.tgz</local>
  </larsoft>

  <!-- Project stages -->

  <stage name="gen">
    <!-- for flux f-->
    <!-- <fcl>run_fluxreader_sbnd.fcl</fcl>  -->
    <!-- for flux h-->
    <fcl>run_fluxreader_incr_run_ana_sbnd.fcl</fcl>
    <!-- <inputlist>/pnfs/sbnd/resilient/users/mdeltutt/Filelists/gsimple_flux_configF-v1.list</inputlist> -->
    <!-- <inputlist>/pnfs/sbnd/resilient/users/mdeltutt/Filelists/gsimple_flux_configG-v1.list</inputlist> -->
    <inputlist>/pnfs/sbnd/resilient/users/mdeltutt/Filelists/gsimple_flux_config&flux_config;.list</inputlist>
    <!-- configI has 1300 files: 260 jobs with 5 files each -->
    <!-- <defname>&name;_&tag;_gen</defname> -->
    <!-- <maxfilesperjob>50</maxfilesperjob> -->
    <maxfilesperjob>5</maxfilesperjob>
    <outdir>/pnfs/sbnd/scratch/users/mdeltutt/&release;/fluxreader_config&flux_config;_&my_version;_&my_run;</outdir>
    <workdir>&PNFSpath;grid_workdir_sbnd/fluxreader_config&flux_config;</workdir>
    <numjobs>260</numjobs>
    <!-- <numjobs>5</numjobs> -->
    <datatier>generated</datatier>
    <memory>2000</memory>
    <jobsub> --expected-lifetime=24h -Q --generate-email-summary -l +SingularityImage=\"/cvmfs/singularity.opensciencegrid.org/fermilab/fnal-wn-sl7:latest\" --append_condor_requirements='(TARGET.HAS_SINGULARITY=?=true)' </jobsub>
    <disk>80GB</disk>
  </stage>

  <!-- file type -->
  <filetype>&file_type;</filetype>

  <!-- run type -->
  <runtype>&run_type;</runtype>

</project>
